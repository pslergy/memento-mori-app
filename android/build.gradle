allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.buildDir = '../build'
subprojects {
    project.buildDir = "${rootProject.buildDir}/${project.name}"
}

// --- üî• –õ–ï–ß–ï–ë–ù–´–ô –ë–õ–û–ö üî• ---
subprojects {
    project.configurations.all {
        resolutionStrategy {
            force 'androidx.core:core:1.10.1'
            force 'androidx.core:core-ktx:1.10.1'
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–∫—Å –¥–ª—è AppCompat, —á—Ç–æ–±—ã —Ç–µ–º–∞ –Ω–∞—à–ª–∞—Å—å
            force 'androidx.appcompat:appcompat:1.6.1'
        }
    }

    afterEvaluate { project ->
        if (project.hasProperty('android')) {
            project.android {
                // ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤–∏–º 36 –≤—Å–µ–º –ø–ª–∞–≥–∏–Ω–∞–º, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Ä—É–≥–∞–ª–∏—Å—å
                compileSdk = 36

                compileOptions {
                    sourceCompatibility JavaVersion.VERSION_17
                    targetCompatibility JavaVersion.VERSION_17
                }

                // –í–Ω–µ–¥—Ä—è–µ–º namespace –≤ —Å—Ç–∞—Ä—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
                if (namespace == null) {
                    if (project.name == 'flutter_bluetooth_serial') {
                        namespace 'io.github.edufolly.flutterbluetoothserial'
                    }
                    // –î–æ–±–∞–≤—å –¥—Ä—É–≥–∏–µ –ø–ª–∞–≥–∏–Ω—ã –∑–¥–µ—Å—å, –µ—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ namespace
                }
            }
        }

        project.tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).configureEach {
            kotlinOptions {
                jvmTarget = "17"
            }
        }
    }
}
// -----------------------------------------------------------

subprojects {
    project.evaluationDependsOn(':app')
}

tasks.register("clean", Delete) {
    delete rootProject.buildDir
}